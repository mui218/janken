<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/style.css">
  <title>Document</title>
</head>
<body>
  <div class="wrapper">
    <header>
      <h1 class="title"><img src="image/title.png" alt=""></h1>
      <p class="sub_title">栄光のタッチダウン</p>
    </header>
    <main>
      <div class="name">
        <p class="you">泥門デビルバッツ</p>
        <p class="rival">神龍時ナーガ</p>
      </div>
      <div class="window">
        <div class="window_1">
          <p id="nd_sena" style="display: none;"></p>
          <img id="sena_window" class="window_image_1" src="image/saisho_sena.png" alt="">
        </div>
        <p class="window_text">VS</p>
        <div class="window_2">
          <p id="nd_agon" style="display: none;"></p>
          <img id="agon_window" class="window_image_2" src="image/saisho_agon.png" alt="">
        </div>
      </div>
      <div class="result_area">
        <div id="result_box" class="result_box">
          <p id="result" class="result_text">RESULT</p>
        </div>
      </div>
      <div class="screen">
        <div class="circle_line_1">
          <img id="icon_agon" class="yuusha_1" src="image/agon.png" alt="">
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle goal"></p>
        </div>
        <div class="circle_line_2">
          <img id="icon_sena" class="yuusha_2" src="image/sena.png" alt="">
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle"></p>
          <p class="circle goal"></p>
        </div>
        <div class="text_wrapper">
          <div class="text_box_1">
            <p id="text">次の行動を選択してください</p>
          </div>
          <div class="text_box_2">
            <ul>
              <li id="play_li" class="btn-flat-border">プレー</li>
              <li id="support_li" class="btn-flat-border">スキル</li>
              <li id="run_li" class="btn-flat-border" style="display: none;">ラン</li>
              <li id="tackle_li" class="btn-flat-border" style="display: none;">タックル</li>
              <li id="pass_li" class="btn-flat-border" style="display: none;">パス</li>
              <li id="next_li" class="btn-flat-border" style="display: none;">次へ</li>
              <li id="sena_li" class="btn-flat-border" style="display: none;">デビルバットゴースト</li>
              <li id="monta_li" class="btn-flat-border" style="display: none;">デビルバックファイア</li>
              <li id="back_li" class="btn-flat-border" style="display: none;">戻る</li>
            </ul>
          </div>
        </div>
      </div>
    </main>

    <!-- モーダルエリアここから -->
    <section id="modalArea" class="modalArea">
      <div id="modalBg" class="modalBg"></div>
      <div class="modalWrapper">
        <div class="modalContents">
          <h1 style="font-size: 36px; padding:20px 0px; color: red;">WIM</h1>
          <img src="image/win_sena.png" alt="">
          <h1 style="padding:10px 0px;">タッチダウン!!</h1>
          <h1 style="padding:10px 0px;">泥門デビルバッツの勝ちです。</h1>
          <p></p>
        </div>
        <div id="closeModal" class="closeModal">
          ×
        </div>
      </div>
    </section>
    <!-- モーダルエリアここまで -->

    <!-- モーダルエリアここから -->
    <section id="modalArea2" class="modalArea">
      <div id="modalBg2" class="modalBg"></div>
      <div class="modalWrapper">
        <div class="modalContents">
          <h1 style="font-size: 36px; padding:20px 0px; color: blue;">ROSE</h1>
          <img src="image/win_agon.png" alt="">
          <h1 style="padding:10px 0px;">タッチダウンされました。</h1>
          <h1 style="padding:10px 0px;">神龍寺ナーガの勝ちです。</h1>
          <p></p>
        </div>
        <div id="closeModal2" class="closeModal">
          ×
        </div>
      </div>
    </section>
    <!-- モーダルエリアここまで -->

    <!-- モーダルエリアここから -->
    <section id="modalArea3" class="modalArea devil">
      <div id="modalBg3" class="modalBg"></div>
      <div class="modalWrapper3">
        <div class="modalContents">
          <h1 style="font-size: 24px; padding:20px 0px;">「デビルバットゴースト」</h1>
          <img src="image/skill_1.png" 　alt="">
          <h1 style="padding: 20px 0;">スキル「デビルバットゴースト」を手に入れた</h1>
          <h1 style="padding-bottom: 20px; font-size: 24px;">効果</h1>
          <h1 style="text-align: left; padding-bottom:10px;">・次のプレーは「ラン」しか選択できなくなる。</h1>
          <h1 style="text-align: left; padding-bottom:10px;">・ランに成功した場合2倍ゲインできる。</h1>
        </div>
        <div id="closeModal3" class="closeModal">
          ×
        </div>
      </div>
    </section>
    <!-- モーダルエリアここまで -->

    <!-- モーダルエリアここから -->
    <section id="modalArea4" class="modalArea devil">
      <div id="modalBg4" class="modalBg"></div>
      <div class="modalWrapper3">
        <div class="modalContents">
          <h1 style="font-size: 24px; padding:20px 0px;">「デビルバックファイア」</h1>
          <img src="image/skill_2.png" 　alt="">
          <h1 style="padding: 20px 0;">スキル「デビルバックファイア」を手に入れた</h1>
          <h1 style="padding-bottom: 20px; font-size: 24px;">効果</h1>
          <h1 style="text-align: left; padding-bottom:10px;">・次のプレーは「パス」しか選択できなくなる。</h1>
          <h1 style="text-align: left; padding-bottom:10px;">・パスが必ず通る。</h1>
        </div>
        <div id="closeModal4" class="closeModal">
          ×
        </div>
      </div>
    </section>
    <!-- モーダルエリアここまで -->

  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    //ここに処理を追加

    let sena_gain = 0;
    let agon_gain = 0;
    let skill_have = 0;
    let skill_number = 0;
    let skill_use = 0;


    $("#play_li").on("click", function () {
      $('#play_li').hide();
      $('#support_li').hide();
      $('#run_li').show();
      $('#tackle_li').show();
      $('#pass_li').show();
      if (skill_use == 3) {
        $('#tackle_li').hide();
        $('#pass_li').hide();
      }
      if (skill_use == 4) {
        $('#tackle_li').hide();
        $('#run_li').hide();
      }
    });

    $("#support_li").on("click", function () {
      if (skill_have == 0 || skill_have == 1 || skill_have == 2) {
        $('#back_li').show();
        $('#play_li').hide();
      }
      if (skill_have == 3) {
        $('#sena_li').show();
        $('#back_li').show();
        $('#play_li').hide();
      }
      if (skill_have == 4) {
        $('#monta_li').show();
        $('#back_li').show();
        $('#play_li').hide();
      }
    });

    $("#back_li").on("click", function () {
      $('#play_li').show();
      $('#back_li').hide();
      $('#sena_li').hide();
      $('#monta_li').hide();
    });

    $("#sena_li").on("click", function () {
      $("#text").text('スキル「デビルバットゴースト」を使用。次のプレーでランが成功した場合ゲインヤードが2倍に。');
      skill_have = 0;
      skill_use = 3;
      $('#sena_li').hide();
      $('#play_li').show();
      $('#back_li').hide();
      $('#support_li').hide();
      console.log(skill_use);
    });

    $("#monta_li").on("click", function () {
      $("#text").text('スキル「デビルバックファイア」を使用。次のプレーでパスは必ず通る。');
      skill_have = 0;
      skill_use = 4;
      $('#monta_li').hide();
      $('#play_li').show();
      $('#back_li').hide();
      $('#support_li').hide();
      console.log(skill_use);
    });




    $("#run_li").on("click", function () {
      const randomNumber = Math.floor(Math.random() * 3);
      $('#run_li').hide();
      $('#tackle_li').hide();
      $('#pass_li').hide();
      $('#next_li').show();
      if (randomNumber == 0) {
        $("#result").text("DRAW");
        $('.result_box').addClass('draw');
        $("#text").text("おっと両者一歩も引かない！");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/run.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/run_agon.png');
      } else if (randomNumber == 1) {
        $("#result").text("WIN");
        $('.result_text').addClass('white');
        $('.result_box').addClass('win');
        $('#nd_agon').show();
        $('.window_image_2').addClass('nd2');
        $("#text").text('セナ選手光速のランニングだ！泥門デビルバッツ3ヤードゲイン');
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/run.png');
        sena_gain = sena_gain + 180;
        if (skill_use == 3) {
          $('#sena_window').attr('src', 'image/skill_1.png');
          sena_gain = sena_gain + 180;
          if (sena_gain > 960) {
            sena_gain = sena_gain - 180;
          }
          $("#text").text('セナ選手デビルバットゴースト炸裂！！泥門デビルバッツ6ヤードゲイン');
        };
        $("#icon_sena").animate({ "left": sena_gain });
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/tackle_agon.png');
      } else if (randomNumber == 2) {
        $("#result").text("ROSE");
        $('.result_text').addClass('white');
        $('.result_box').addClass('rose');
        $('#nd_sena').show();
        $('.window_image_1').addClass('nd1');
        $("#text").text("ここで一休選手へのロングパス！神龍寺ナーガ6ヤードゲイン!");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/run.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/pass_agon.png');
        if (agon_gain >= 720) {
          agon_gain = 900;
        } else {
          agon_gain = agon_gain + 360;
        }
        $("#icon_agon").animate({ "left": agon_gain });
      } else {
        ;
      }

      if (skill_use == 3) {
        skill_use = 0;
        console.log(skill_use);
      }
      if (skill_have < 3) {
        skill_number = Math.floor(Math.random() * 5);
        skill_have = skill_number;
        console.log(skill_have);
        if (agon_gain < 900 && sena_gain < 900 && skill_have == 3) {
          $('#modalArea3').fadeIn();
        } else if (agon_gain < 900 && sena_gain < 900 && skill_have == 4) {
          $('#modalArea4').fadeIn();
        }
      }
      if (sena_gain >= 900) {
        setTimeout(function () {
          $('#modalArea').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };
      if (agon_gain >= 900) {
        setTimeout(function () {
          $('#modalArea2').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };



      // setTimeout(function () {
      //   $('#sena_window').attr('src', 'image/saisho_sena.png');
      //   $('#agon_window').attr('src', 'image/saisho_agon.png');
      //   $("#result").text("RESULT");
      //   $('#play_li').show();
      //   $('#support_li').show();
      //   $('#next_li').hide();
      // }, 7000);
    });


    $("#tackle_li").on("click", function () {
      const randomNumber = Math.floor(Math.random() * 3);
      $('#run_li').hide();
      $('#tackle_li').hide();
      $('#pass_li').hide();
      $('#next_li').show();
      if (randomNumber == 0) {
        $("#result").text("ROSE");
        $('.result_text').addClass('white');
        $('.result_box').addClass('rose');
        $('#nd_sena').show();
        $('.window_image_1').addClass('nd1');
        $("#text").text("阿含選手を誰も止められない！神龍寺ナーガ3ヤードゲイン");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/tackle_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/run_agon.png');
        agon_gain = agon_gain + 180;
        $("#icon_agon").animate({ "left": agon_gain });
      } else if (randomNumber == 1) {
        $("#result").text("DRAW");
        $('.result_box').addClass('draw');
        $("#text").text("おっと両者一歩も引かない！");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/tackle_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/tackle_agon.png');
      } else if (randomNumber == 2) {
        $("#result").text("WIN");
        $('.result_text').addClass('white');
        $('.result_box').addClass('win');
        $('#nd_agon').show();
        $('.window_image_2').addClass('nd2');
        $("#text").text("ここでセナ選手の光速タックル！神龍寺3ヤード後退");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/tackle_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/pass_agon.png');
        if (agon_gain == 0) {
          agon_gain = 0;
        } else {
          agon_gain = agon_gain - 180;
        }
        $("#icon_agon").animate({ "left": agon_gain });
      } else {
        ;
      }

      if (skill_have < 3) {
        skill_number = Math.floor(Math.random() * 5);
        skill_have = skill_number;
        console.log(skill_have);
        if (agon_gain < 900 && sena_gain < 900 && skill_have == 3) {
          $('#modalArea3').fadeIn();
        } else if (agon_gain < 900 && sena_gain < 900 && skill_have == 4) {
          $('#modalArea4').fadeIn();
        }
      }

      if (sena_gain >= 900 || agon_gain >= 900) {
        setTimeout(function () {
          $('#modalArea').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };
      if (agon_gain >= 900) {
        setTimeout(function () {
          $('#modalArea2').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };
      // setTimeout(function () {
      //   $('#sena_window').attr('src', 'image/saisho_sena.png');
      //   $('#agon_window').attr('src', 'image/saisho_agon.png');
      //   $("#result").text("RESULT");
      //   $('#play_li').show();
      //   $('#support_li').show();
      //   $('#next_li').hide();
      // }, 7000);
    });

    $("#pass_li").on("click", function () {
      let randomNumber = Math.floor(Math.random() * 3);
      $('#run_li').hide();
      $('#tackle_li').hide();
      $('#pass_li').hide();
      $('#next_li').show();
      if (skill_use == 4) {
        randomNumber = 0;
      };
      if (randomNumber == 0) {
        $("#result").text("WIN");
        $('.result_text').addClass('white');
        $('.result_box').addClass('win');
        $('#nd_agon').show();
        $('.window_image_2').addClass('nd2');
        $("#text").text("ヒル魔選手ここで意表を突くロングパスだー！泥門デビルバッツ6ヤードゲイン");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/pass_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/run_agon.png');
        if (skill_use == 4) {
          $('#sena_window').attr('src', 'image/skill_2.png');
          $("#text").text("これはすごい！大技デビルバックファイアが決まった！！泥門デビルバッツ6ヤードゲイン");
        }
        if (sena_gain >= 720) {
          sena_gain = 900;
        } else {
          sena_gain = sena_gain + 360;
        }
        $("#icon_sena").animate({ "left": sena_gain });
      } else if (randomNumber == 1) {
        $("#result").text("ROSE");
        $('.result_text').addClass('white');
        $('.result_box').addClass('rose');
        $('#nd_sena').show();
        $('.window_image_1').addClass('nd1');
        $("#text").text("阿含選手の手刀炸裂！泥門デビルバッツ3ヤード後退");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/pass_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/tackle_agon.png');
        if (sena_gain == 0) {
          sena_gain = 0;
        } else {
          sena_gain = sena_gain - 180;
        }
        $("#icon_sena").animate({ "left": sena_gain });
      } else if (randomNumber == 2) {
        $("#result").text("DRAW");
        $('.result_box').addClass('draw');
        $("#text").text("おっと両者一歩も引かない！");
        $('#sena_window[src="image/saisho_sena.png"]').attr('src', 'image/pass_sena.png');
        $('#agon_window[src="image/saisho_agon.png"]').attr('src', 'image/pass_agon.png');
      } else {
        ;
      }
      if (skill_use == 4) {
        skill_use = 0;
        console.log(skill_use);
      }
      if (skill_have < 3) {
        skill_number = Math.floor(Math.random() * 5);
        skill_have = skill_number;
        console.log(skill_have);
        if (agon_gain < 900 && sena_gain < 900 && skill_have == 3) {
          $('#modalArea3').fadeIn();
        } else if (agon_gain < 900 && sena_gain < 900 && skill_have == 4) {
          $('#modalArea4').fadeIn();
        }
      }

      if (sena_gain >= 900 || agon_gain >= 900) {
        setTimeout(function () {
          $('#modalArea').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };
      if (agon_gain >= 900) {
        setTimeout(function () {
          $('#modalArea2').fadeIn();
          $('#nd_sena').hide();
          $('#nd_agon').hide();
        }, 1000);
      };
      // setTimeout(function () {
      //   $('#sena_window').attr('src', 'image/saisho_sena.png');
      //   $('#agon_window').attr('src', 'image/saisho_agon.png');
      //   $("#result").text("RESULT");
      //   $('#play_li').show();
      //   $('#support_li').show();
      //   $('#next_li').hide();
      // }, 7000);
    });

    $(function () {
      $('#next_li').click(function () {
        $('#sena_window').attr('src', 'image/saisho_sena.png');
        $('#agon_window').attr('src', 'image/saisho_agon.png');
        $("#result").text("RESULT");
        $('#play_li').show();
        $('#support_li').show();
        $('#next_li').hide();
        $('.result_box').removeClass('win');
        $('.result_box').removeClass('draw');
        $('.result_box').removeClass('rose');
        $('.result_text').removeClass('white');
        $('.window_image_1').removeClass('nd1');
        $('.window_image_2').removeClass('nd2');
        $('#nd_sena').hide();
        $('#nd_agon').hide();
      });
    });


    $(function () {
      $('#closeModal , #modalBg').click(function () {
        $('#modalArea').fadeOut();
        location.reload();
      });
      $('#closeModal2 , #modalBg2').click(function () {
        $('#modalArea2').fadeOut();
        location.reload();
      });
      $('#closeModal3 , #modalBg3').click(function () {
        $('#modalArea3').fadeOut();
      });
      $('#closeModal4 , #modalBg4').click(function () {
        $('#modalArea4').fadeOut();
      });
    });




    // $("#run").on("click", function () {
    //   const randomNumber = Math.floor(Math.random() * 3);
    //   if (randomNumber == 0) {
    //     $("#com_hand").text("相手はグー");
    //     $("#result").text("DRAW");
    //     match_count = match_count + 1
    //     $("#match_count").text("試合数：" + match_count + "戦");
    //     average = (win_count / match_count) * 100
    //     $("#average").text("勝率：" + Math.floor(average) + "%");
    //   } else if (randomNumber == 1) {
    //     $("#com_hand").text("相手はチョキ");
    //     $("#result").text("結果：あなたの勝ち");
    //     win_count = win_count + 1
    //     $("#win_count").text("勝利数：" + win_count + "勝");
    //     match_count = match_count + 1
    //     $("#match_count").text("試合数：" + match_count + "戦");
    //     average = (win_count / match_count) * 100
    //     $("#average").text("勝率：" + Math.floor(average) + "%");
    //   } else if (randomNumber == 2) {
    //     $("#com_hand").text("相手はパー");
    //     $("#result").text("結果：あなたの負け");
    //     match_count = match_count + 1
    //     $("#match_count").text("試合数：" + match_count + "戦");
    //     average = (win_count / match_count) * 100
    //     $("#average").text("勝率：" + Math.floor(average) + "%");
    //   } else {
    //     ;
    //   }

    // });

  </script>


</body>
</html>
